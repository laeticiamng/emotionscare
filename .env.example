# ============================================================================
#  EmotionsCare – Exemple d'environnement local
#  Copiez ce fichier en `.env.local` puis remplissez uniquement les champs utiles.
#  Tous les secrets doivent rester hors du bundle client (ne jamais commit un .env réel).
# ============================================================================

# === SUPABASE – CLEFS FRONT & EDGE ===
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=public-anon-key
VITE_SUPABASE_PUBLISHABLE_KEY=public-anon-key   # Compatibilité SDK v2 (SSR/Edge)
# Facultatif : quelques scripts CLI lisent ce champ pour éviter de dupliquer les clefs
VITE_SUPABASE_SERVICE_ROLE_KEY=

NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co  # Compat héritage Next.js
NEXT_PUBLIC_SUPABASE_ANON_KEY=public-anon-key

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=public-anon-key
SUPABASE_SERVICE_ROLE_KEY=                               # ⚠️ Edge functions uniquement (ne pas injecter côté client)
SUPABASE_SERVICE_ROLE=                                   # Alias legacy pour scripts
SUPABASE_STORAGE_URL=https://your-project.supabase.co/storage/v1

# URLs dédiées aux Edge Functions / GraphQL (scripts & tests)
SUPABASE_FUNCTIONS_URL=https://your-project.supabase.co/functions/v1
SUPABASE_GRAPHQL_URL=https://your-project.supabase.co/graphql/v1
SUPABASE_JWT_SECRET=

# Edge Functions (assessments)
ALLOWED_ORIGINS=https://app.emotionscare.com,https://staging.emotionscare.com
FF_ASSESS_WHO5=true
FF_ASSESS_STAI6=true
FF_ASSESS_SAM=true
FF_ASSESS_SUDS=true

# Identifiants seed pour `npm run db:seed`
# DEMO_SUPABASE_UID=00000000-0000-0000-0000-000000000001
# DEMO_SUPABASE_ORG=00000000-0000-0000-0000-0000000000ab

# === API BACKEND & RUNTIME NODE ===
PORT=3001
API_PORT=3001
BACKEND_BASE_URL=http://localhost:3001
APP_VERSION=

# === DATABASE & TESTS ===
DATABASE_URL=postgres://postgres:postgres@localhost:5432/emotionscare
DB_HOST=localhost
DB_PORT=5432
DB_NAME=emotionscare
DB_USER=postgres
DB_PASS=postgres
SUPA_URL=
SUPA_SERVICE_ROLE_KEY=
TEST_DB_SECRET=

# === AUTHENTIFICATION & SÉCURITÉ ===
JWT_SECRETS=
HASH_PEPPER=
ADMIN_ID=

# === OBSERVABILITÉ (SENTRY) ===
VITE_SENTRY_DSN=
VITE_SENTRY_ENVIRONMENT=development
VITE_SENTRY_TRACES_SAMPLE_RATE=0.1
VITE_SENTRY_REPLAYS_SESSION_SAMPLE_RATE=0
VITE_SENTRY_REPLAYS_ON_ERROR_SAMPLE_RATE=1
VITE_SENTRY_RELEASE=
NEXT_PUBLIC_SENTRY_DSN=
NEXT_PUBLIC_SENTRY_TRACES_SAMPLE_RATE=0.2
NEXT_PUBLIC_SENTRY_REPLAYS_SESSION_SAMPLE_RATE=0
NEXT_PUBLIC_SENTRY_REPLAYS_ON_ERROR_SAMPLE_RATE=0
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_RELEASE=$GITHUB_SHA
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_REPLAYS_SESSION_SAMPLE_RATE=0
SENTRY_REPLAYS_ON_ERROR_SAMPLE_RATE=1
SENTRY_AUTH_TOKEN=
SENTRY_ORG=
SENTRY_PROJECT=

# === OBSERVABILITÉ (OTEL EDGE) ===
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_EXPORTER_OTLP_HEADERS=Authorization=Bearer <token>

# === OBSERVABILITÉ (HEALTHCHECK) ===
HEALTHCHECK_TIMEOUT_MS=1500
HEALTHCHECK_AI_URL=
HEALTHCHECK_DATABASE_URL=
NEXT_PUBLIC_BASE_URL=http://localhost:3000
EC_HEALTH_KEY=
HEALTH_SOFT_FAIL=false

# === FRONTEND (URLs & uploads) ===
VITE_API_URL=https://api.emotionscare.dev
VITE_WEB_URL=http://localhost:3000
VITE_UPLOAD_MAX_SIZE=10485760
VITE_ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp
VITE_ALLOWED_AUDIO_TYPES=audio/mpeg,audio/wav
VITE_ADAPTIVE_MUSIC_PREVIEW_URL=

# === FIREBASE (optionnel) ===
VITE_FIREBASE_API_KEY=
VITE_FIREBASE_AUTH_DOMAIN=
VITE_FIREBASE_PROJECT_ID=
VITE_FIREBASE_STORAGE_BUCKET=
VITE_FIREBASE_MESSAGING_SENDER_ID=
VITE_FIREBASE_APP_ID=
VITE_FIREBASE_MEASUREMENT_ID=

# === IA & INTÉGRATIONS EXTERNES ===
OPENAI_API_KEY=
NEXT_PUBLIC_OPENAI_API_KEY=
VITE_OPENAI_API_KEY=
VITE_OPENAI_BASE_URL=https://api.openai.com
HUME_API_KEY=
NEXT_PUBLIC_HUME_API_KEY=
VITE_HUME_API_KEY=
SUNO_API_KEY=
MUSIC_API_KEY=
AI_COACH_MODEL=gpt-4o-mini
AI_TRANSCRIBE_MODEL=whisper-1
AI_IMAGE_MODEL=dall-e-3

# === WEB PUSH & NOTIFICATIONS ===
VITE_VAPID_PUBLIC_KEY=
NEXT_PUBLIC_VAPID_KEY=
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
RESEND_API_KEY=
RESEND_DEFAULT_FROM=no-reply@emotionscare.dev
RESEND_SOCIAL_AUDIENCE_ID=

# === FEATURE FLAGS (fallback client défini dans src/core/flags.ts) ===
# Voir DEFAULT_FLAGS pour la vérité terrain ; lors des tests locaux vous pouvez stubber /me/feature_flags.
# Exemple JSON pour mocks Playwright :
# {
#   "FF_JOURNAL": true,
#   "FF_COMMUNITY": true,
#   "FF_VR": true,
#   "FF_ASSESS_PANAS": true
# }
FF_ORCH_AMBITION=true
FF_ORCH_GRIT=true
FF_ORCH_BUBBLE=true
FF_ORCH_MIXER=true
FF_ASSESS_GAS=true
FF_ASSESS_GRITS=true
FF_ASSESS_BRS=true
FF_ASSESS_PSS10=true
# Orchestration clinique (opt-in)
FF_ORCH_COMMUNITY=true
FF_ORCH_SOCIAL_COCON=true
FF_ORCH_AURAS=true
FF_ASSESS_UCLA3=true
FF_ASSESS_MSPSS=true
FF_ASSESS_WHO5=true
FF_B2B_AGGREGATES=true
FF_B2B_HEATMAP=true

# === BUILD & METADONNÉES ===
VITE_APP_VERSION=local-dev
VITE_COMMIT_SHA=
NODE_ENV=development
NODE_OPTIONS=
USE_BUN=
ANALYZE=
SKIP_HEAVY=
SKIP_POSTINSTALL=
SKIP_TEST_DEPS=
SKIP_TYPE_CHECK=
HUSKY_SKIP_INSTALL=
PUPPETEER_SKIP_DOWNLOAD=
CYPRESS_INSTALL_BINARY=
CYPRESS_SKIP_BINARY_CACHE=
CYPRESS_SKIP_BINARY_INSTALL=
ESBUILD_BINARY_PATH=
DISABLE_TSC=
TSC_NONPOLLING_WATCHER=
TSC_COMPILE_ON_ERROR=

# === PLAYWRIGHT / QA ===
PW_BASE_URL=http://localhost:3000
PW_B2C_EMAIL=
PW_B2C_PASSWORD=
PLAYWRIGHT_BASE_URL=http://localhost:3000
PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD=

# === PUSH & AUDIT MAIL ===
STRIPE_SECRET_KEY=

# === DIVERS ===
