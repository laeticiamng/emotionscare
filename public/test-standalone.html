<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test JS Standalone</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-box {
      background: white;
      padding: 20px;
      margin: 10px 0;
      border-radius: 8px;
      border: 2px solid #ddd;
    }
    .success { border-color: #22c55e; }
    .error { border-color: #ef4444; }
    h1 { color: #333; }
    code { background: #f0f0f0; padding: 2px 6px; border-radius: 3px; }
  </style>
</head>
<body>
  <h1>üîç Test Diagnostic EmotionsCare</h1>
  
  <div id="html-test" class="test-box">
    <h2>1Ô∏è‚É£ HTML</h2>
    <p>‚úÖ HTML se charge correctement</p>
  </div>

  <div id="js-test" class="test-box error">
    <h2>2Ô∏è‚É£ JavaScript</h2>
    <p>‚ùå JavaScript ne s'ex√©cute PAS</p>
  </div>

  <div id="dom-test" class="test-box error">
    <h2>3Ô∏è‚É£ DOM</h2>
    <p>‚ùå DOM non manipulable</p>
  </div>

  <div id="console-test" class="test-box error">
    <h2>4Ô∏è‚É£ Console</h2>
    <p>‚ùå Console non accessible</p>
  </div>

  <div id="results" class="test-box">
    <h2>üìä R√©sultat</h2>
    <p id="result-text">En attente...</p>
  </div>

  <script>
    console.log('üöÄ TEST STANDALONE: JavaScript s\'ex√©cute!');
    
    // Test 2: JavaScript
    const jsBox = document.getElementById('js-test');
    if (jsBox) {
      jsBox.className = 'test-box success';
      jsBox.innerHTML = '<h2>2Ô∏è‚É£ JavaScript</h2><p>‚úÖ JavaScript s\'ex√©cute correctement</p>';
      console.log('‚úÖ Test JS: OK');
    }

    // Test 3: DOM
    const domBox = document.getElementById('dom-test');
    if (domBox) {
      domBox.className = 'test-box success';
      domBox.innerHTML = '<h2>3Ô∏è‚É£ DOM</h2><p>‚úÖ DOM manipulable</p>';
      console.log('‚úÖ Test DOM: OK');
    }

    // Test 4: Console
    const consoleBox = document.getElementById('console-test');
    if (consoleBox && typeof console !== 'undefined') {
      consoleBox.className = 'test-box success';
      consoleBox.innerHTML = '<h2>4Ô∏è‚É£ Console</h2><p>‚úÖ Console accessible</p>';
      console.log('‚úÖ Test Console: OK');
    }

    // R√©sultat final
    const resultBox = document.getElementById('result-text');
    if (resultBox) {
      resultBox.innerHTML = `
        <strong style="color: #22c55e;">‚úÖ TOUS LES TESTS PASSENT</strong><br><br>
        <strong>Diagnostic:</strong> Le probl√®me ne vient PAS de l'environnement Lovable.<br>
        Le probl√®me vient de la configuration Vite ou du code React.<br><br>
        <strong>Actions:</strong>
        <ul>
          <li>V√©rifier les imports circulaires</li>
          <li>V√©rifier les erreurs TypeScript</li>
          <li>Simplifier les providers</li>
          <li>Tester avec un React minimal</li>
        </ul>
      `;
      console.log('‚úÖ DIAGNOSTIC: Environnement OK, probl√®me dans Vite/React');
    }

    // Test fetch
    console.log('üåê Test fetch API...');
    try {
      fetch('/')
        .then(r => console.log('‚úÖ Fetch OK:', r.status))
        .catch(e => console.error('‚ùå Fetch error:', e));
    } catch (e) {
      console.error('‚ùå Fetch non disponible:', e);
    }

    console.log('üéØ Tests termin√©s - Voir r√©sultats ci-dessus');
  </script>
</body>
</html>
